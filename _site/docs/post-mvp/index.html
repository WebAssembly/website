<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">
  <title>WebAssembly</title>
  <link rel="stylesheet" type="text/css" href="/css/custom2.css">
</head>


<body>
  <header class="page-section-spacious">
    <div class="container">
    <div class="site-logo">
      <h1 class="title">WebAssembly</h1>
    </div>
    <nav class="site-nav">
      <a class="site-nav-item btn" href="/">Overview</a>
      <a class="site-nav-item btn" href="/demo/">Demo</a>
      <a class="site-nav-item btn" href="/getting-started/intro/">Getting Started</a>
      
      <a class="site-nav-item btn" href="/docs/binary-encoding/">Docs</a>
      <a class="site-nav-item btn" href="/community/feedback/">Community</a>
      <a class="site-nav-item btn" href="/roadmap/">Roadmap</a>
      <a class="site-nav-item btn" href="/docs/faq/">FAQ</a>
    </nav>
    </div>
  </header>
  <section class="banner-update">
    <div class="container">
      <div class="banner-update-icon"></div>
      <span class="banner-update-date"></span>
      <span>WebAssembly has reached the Browser Preview milestone. <a href="/roadmap/">Learn more</a></span>
    </div>
  </section>
  
<section>
  <div class="container">
    <div class="row">
      <div class="col-xs-12 col-lg-9 col-pop">
        <h1 id="essential-post-mvp-features">Essential Post-MVP Features</h1>

<p>Some features are known to be essential and needed as soon as possible but aren’t
in the <a href="../MVP/">Minimum Viable Product (MVP)</a>. There is a much
bigger <a href="../FutureFeatures/">list of features</a> that will be added after these
essential features.</p>

<p>Post-MVP features will be available under <a href="../FeatureTest/">feature tests</a>.</p>

<h2 id="threads">Threads</h2>

<p>Provide low-level buildings blocks for pthreads-style shared memory: shared
memory between threads, atomics and futexes (or <a href="http://wg21.link/n4195">synchronic</a>).</p>

<p>New atomic memory operators, including loads/stores annotated with their atomic
ordering property, will follow the <a href="http://www.hboehm.info/c++mm/">C++11 memory model</a>, similarly to the
<a href="https://developer.chrome.com/native-client/reference/pnacl-c-cpp-language-support#memory-model-and-atomics">PNaCl atomic support</a> and the <a href="https://github.com/tc39/ecmascript_sharedmem">SharedArrayBuffer</a> proposal. Regular loads
and stores will be bound by a happens-before relationship to atomic operators
in the same thread of execution, which themselves synchronize-with atomics in
other threads. Following these rules, regular load/store operators can still be
elided, duplicated, and split up. This guarantees that data-race free code
executes as if it were sequentially consistent. Even when there are data races,
WebAssembly will ensure that the <a href="../Nondeterminism/">nondeterminism</a> remains
limited and local.</p>

<p>Modules can have thread-local variables that are disjoint from linear memory
and can thus be represented efficiently by the engine.</p>

<h2 id="fixed-width-simd">Fixed-width SIMD</h2>

<p>Support fixed-width SIMD vectors, initially only for 128-bit wide vectors as
demonstrated in <a href="https://developer.chrome.com/native-client/reference/pnacl-c-cpp-language-support#portable-simd-vectors">PNaCl’s SIMD</a> and <a href="https://github.com/tc39/ecmascript_simd">SIMD.js</a>.</p>

<p>SIMD adds new local types (e.g., <code class="highlighter-rouge">f32x4</code>) so it has to be part of the core
semantics. SIMD operators (e.g., <code class="highlighter-rouge">f32x4.add</code>) could be either builtin
operators (no different from <code class="highlighter-rouge">i32.add</code>) or exports of a builtin SIMD module.</p>

<h2 id="zero-cost-exception-handling">Zero-cost Exception Handling</h2>

<p>The WebAssembly MVP may support four no-exception
modes for C++:</p>

<ul>
  <li>Compiler transforms <code class="highlighter-rouge">throw</code> to <code class="highlighter-rouge">abort()</code>.</li>
  <li>Compiler-enforced <code class="highlighter-rouge">-fno-exceptions</code> mode (note <a href="https://blog.mozilla.org/nnethercote/2011/01/18/the-dangers-of-fno-exceptions">caveats</a>).</li>
  <li>Compiler conversion of exceptions to branching at all callsites.</li>
  <li>In a Web environment exception handling can be emulated using JavaScript
exception handling, which can provide correct semantics but isn’t fast.</li>
</ul>

<p>These modes are suboptimal for code bases which rely on C++ exception handling,
but are perfectly acceptable for C code, or for C++ code which avoids
exceptions. This doesn’t prevent developers from using the C++ standard library:
their code will function correctly (albeit slower at times) as long as it
doesn’t encounter exceptional cases.</p>

<p>Post-MVP, WebAssembly will gain support for developer access to stack unwinding,
inspection, and limited manipulation. These are critical to supporting zero-cost
exception handling by exposing <a href="https://extensiblewebmanifesto.org">low-level capabilities</a>.</p>

<p>In turn, stack unwinding, inspection, and limited manipulation will be used to
implement <code class="highlighter-rouge">setjmp</code>/<code class="highlighter-rouge">longjmp</code>. This can enable all of the defined behavior of
<code class="highlighter-rouge">setjmp</code>/<code class="highlighter-rouge">longjmp</code>, namely unwinding the stack without calling C++
destructors. It does not, however, allow the undefined behavior case of jumping
forward to a stack that was already unwound which is sometimes used to implement
coroutines. Coroutine support is being
<a href="../FutureFeatures/#coroutines">considered separately</a>.</p>

<h2 id="feature-testing">Feature Testing</h2>

<p>Post-MVP, some form of feature-testing will be required. We don’t yet have the
experience writing polyfills to know whether <code class="highlighter-rouge">has_feature</code> is the right
primitive building block so we’re not defining it (or something else) until we
gain this experience. In the interim, it’s possible to do a crude feature test
(as people do in JavaScript) by just <code class="highlighter-rouge">eval</code>-ing WebAssembly code and catching
validation errors.</p>

<p>See <a href="../FeatureTest/">Feature test</a> for a more detailed sketch.</p>

      </div>
      <div class="col-xs-12 col-lg-3">
        <h6 class="side-title">Documentation</h6>
        <nav class="side-nav">
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
          <a class="side-nav-item" href="/docs/binary-encoding/">Binary Encoding</a>
          
        
          
          <a class="side-nav-item" href="/docs/c-and-c++/">Guide for C/C++ developers</a>
          
        
          
        
          
          <a class="side-nav-item" href="/docs/dynamic-linking/">Dynamic linking</a>
          
        
          
        
          
          <a class="side-nav-item" href="/docs/faq/">FAQ</a>
          
        
          
          <a class="side-nav-item" href="/docs/feature-test/">Feature Test</a>
          
        
          
          <a class="side-nav-item" href="/docs/future-features/">Features to add after the MVP</a>
          
        
          
          <a class="side-nav-item" href="/docs/gc/">GC / DOM / Web API Integration <img class="emoji" title=":unicorn:" alt=":unicorn:" src="https://assets-cdn.github.com/images/icons/emoji/unicode/1f984.png" height="20" width="20" align="absmiddle"></a>
          
        
          
          <a class="side-nav-item" href="/docs/high-level-goals/">WebAssembly High-Level Goals</a>
          
        
          
          <a class="side-nav-item" href="/docs/jit-library/">JIT and Optimization Library</a>
          
        
          
          <a class="side-nav-item" href="/docs/js/">JavaScript API</a>
          
        
          
          <a class="side-nav-item" href="/docs/mvp/">Minimum Viable Product</a>
          
        
          
          <a class="side-nav-item" href="/docs/modules/">Modules</a>
          
        
          
          <a class="side-nav-item" href="/docs/non-web/">Non-Web Embeddings</a>
          
        
          
          <a class="side-nav-item" href="/docs/nondeterminism/">Nondeterminism in WebAssembly</a>
          
        
          
          <a class="side-nav-item" href="/docs/portability/">Portability</a>
          
        
          
          <a class="side-nav-item" href="/docs/post-mvp/">Essential Post-MVP Features</a>
          
        
          
          <a class="side-nav-item" href="/docs/rationale/">Design Rationale</a>
          
        
          
          <a class="side-nav-item" href="/docs/security/">Security</a>
          
        
          
          <a class="side-nav-item" href="/docs/semantics/">Semantics</a>
          
        
          
          <a class="side-nav-item" href="/docs/text-format/">Text Format</a>
          
        
          
          <a class="side-nav-item" href="/docs/tooling/">Tooling support</a>
          
        
          
          <a class="side-nav-item" href="/docs/use-cases/">Use Cases</a>
          
        
          
          <a class="side-nav-item" href="/docs/web/">Web Embedding</a>
          
        
        </nav>
      </div>
    </div>
  </div>
</section>
</body>
</html>
